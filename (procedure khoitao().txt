(procedure khoitao()
	simulator( 'spectre )
	design(	 "/home/disk/simulation/SIM_IC61/16_circuit/spectre/schematic/netlist/netlist")
	resultsDir( "/home/disk/simulation/SIM_IC61/16_circuit/spectre/schematic" )
	modelFile( 
	    '("/home/hoangtrang/Thu_vien_PDK/PDK_CRN65LP_v1.7a_Official_IC61_20120914_all/PDK_CRN65LP_v1.7a_Official_IC61_20120914/tsmcN65/../models/spectre/toplevel.scs" "tt_lib")
	)
	fin = infile("./APSO_thongso.txt")
	fscanf(fin "%s" w01_1)
	fscanf(fin "\n%s" w01_2)
	fscanf(fin "\n%s" w01_3)
	fscanf(fin "\n%s" w01_4)
	fscanf(fin "\n%s" w01_5)
	fscanf(fin "\n%s" w01_6)
	fscanf(fin "\n%s" w01_7)
	fscanf(fin "\n%s" w01_8)
	fscanf(fin "\n%s" w01_9)
	fscanf(fin "\n%s" w01_10)
	fscanf(fin "\n%s" w01_11)
	fscanf(fin "\n%s" w01_12)
	fscanf(fin "\n%s" w01_13)
	fscanf(fin "\n%s" w01_14)
	fscanf(fin "\n%s" w01_15)
	fscanf(fin "\n%s" w01_16)

	fscanf(fin "\n%s" l01_1)
	fscanf(fin "\n%s" l01_2)
	fscanf(fin "\n%s" l01_3)
	fscanf(fin "\n%s" l01_4)
	fscanf(fin "\n%s" l01_5)
	fscanf(fin "\n%s" l01_6)
	fscanf(fin "\n%s" l01_7)
	fscanf(fin "\n%s" l01_8)
	fscanf(fin "\n%s" l01_9)
	fscanf(fin "\n%s" l01_10)
	fscanf(fin "\n%s" l01_11)
	fscanf(fin "\n%s" l01_12)
	fscanf(fin "\n%s" l01_13)
	fscanf(fin "\n%s" l01_14)
	fscanf(fin "\n%s" l01_15)
	fscanf(fin "\n%s" l01_16)

	fscanf(fin "\n%s" w23_1)
	fscanf(fin "\n%s" w23_2)
	fscanf(fin "\n%s" w23_3)
	fscanf(fin "\n%s" w23_4)
	fscanf(fin "\n%s" w23_5)
	fscanf(fin "\n%s" w23_6)
	fscanf(fin "\n%s" w23_7)
	fscanf(fin "\n%s" w23_8)
	fscanf(fin "\n%s" w23_9)
	fscanf(fin "\n%s" w23_10)
	fscanf(fin "\n%s" w23_11)
	fscanf(fin "\n%s" w23_12)
	fscanf(fin "\n%s" w23_13)
	fscanf(fin "\n%s" w23_14)
	fscanf(fin "\n%s" w23_15)
	fscanf(fin "\n%s" w23_16)

	fscanf(fin "\n%s" l23_1)
	fscanf(fin "\n%s" l23_2)
	fscanf(fin "\n%s" l23_3)
	fscanf(fin "\n%s" l23_4)
	fscanf(fin "\n%s" l23_5)
	fscanf(fin "\n%s" l23_6)
	fscanf(fin "\n%s" l23_7)
	fscanf(fin "\n%s" l23_8)
	fscanf(fin "\n%s" l23_9)
	fscanf(fin "\n%s" l23_10)
	fscanf(fin "\n%s" l23_11)
	fscanf(fin "\n%s" l23_12)
	fscanf(fin "\n%s" l23_13)
	fscanf(fin "\n%s" l23_14)
	fscanf(fin "\n%s" l23_15)
	fscanf(fin "\n%s" l23_16)

	fscanf(fin "\n%s" w47_1)
	fscanf(fin "\n%s" w47_2)
	fscanf(fin "\n%s" w47_3)
	fscanf(fin "\n%s" w47_4)
	fscanf(fin "\n%s" w47_5)
	fscanf(fin "\n%s" w47_6)
	fscanf(fin "\n%s" w47_7)
	fscanf(fin "\n%s" w47_8)
	fscanf(fin "\n%s" w47_9)
	fscanf(fin "\n%s" w47_10)
	fscanf(fin "\n%s" w47_11)
	fscanf(fin "\n%s" w47_12)
	fscanf(fin "\n%s" w47_13)
	fscanf(fin "\n%s" w47_14)
	fscanf(fin "\n%s" w47_15)
	fscanf(fin "\n%s" w47_16)

	fscanf(fin "\n%s" w5_1)
	fscanf(fin "\n%s" w5_2)
	fscanf(fin "\n%s" w5_3)
	fscanf(fin "\n%s" w5_4)
	fscanf(fin "\n%s" w5_5)
	fscanf(fin "\n%s" w5_6)
	fscanf(fin "\n%s" w5_7)
	fscanf(fin "\n%s" w5_8)
	fscanf(fin "\n%s" w5_9)
	fscanf(fin "\n%s" w5_10)
	fscanf(fin "\n%s" w5_11)
	fscanf(fin "\n%s" w5_12)
	fscanf(fin "\n%s" w5_13)
	fscanf(fin "\n%s" w5_14)
	fscanf(fin "\n%s" w5_15)
	fscanf(fin "\n%s" w5_16)

	fscanf(fin "\n%s" l457_1)
	fscanf(fin "\n%s" l457_2)
	fscanf(fin "\n%s" l457_3)
	fscanf(fin "\n%s" l457_4)
	fscanf(fin "\n%s" l457_5)
	fscanf(fin "\n%s" l457_6)
	fscanf(fin "\n%s" l457_7)
	fscanf(fin "\n%s" l457_8)
	fscanf(fin "\n%s" l457_9)
	fscanf(fin "\n%s" l457_10)
	fscanf(fin "\n%s" l457_11)
	fscanf(fin "\n%s" l457_12)
	fscanf(fin "\n%s" l457_13)
	fscanf(fin "\n%s" l457_14)
	fscanf(fin "\n%s" l457_15)
	fscanf(fin "\n%s" l457_16)

	fscanf(fin "\n%s" w6_1)
	fscanf(fin "\n%s" w6_2)
	fscanf(fin "\n%s" w6_3)
	fscanf(fin "\n%s" w6_4)
	fscanf(fin "\n%s" w6_5)
	fscanf(fin "\n%s" w6_6)
	fscanf(fin "\n%s" w6_7)
	fscanf(fin "\n%s" w6_8)
	fscanf(fin "\n%s" w6_9)
	fscanf(fin "\n%s" w6_10)
	fscanf(fin "\n%s" w6_11)
	fscanf(fin "\n%s" w6_12)
	fscanf(fin "\n%s" w6_13)
	fscanf(fin "\n%s" w6_14)
	fscanf(fin "\n%s" w6_15)
	fscanf(fin "\n%s" w6_16)

	fscanf(fin "\n%s" l6_1)
	fscanf(fin "\n%s" l6_2)
	fscanf(fin "\n%s" l6_3)
	fscanf(fin "\n%s" l6_4)
	fscanf(fin "\n%s" l6_5)
	fscanf(fin "\n%s" l6_6)
	fscanf(fin "\n%s" l6_7)
	fscanf(fin "\n%s" l6_8)
	fscanf(fin "\n%s" l6_9)
	fscanf(fin "\n%s" l6_10)
	fscanf(fin "\n%s" l6_11)
	fscanf(fin "\n%s" l6_12)
	fscanf(fin "\n%s" l6_13)
	fscanf(fin "\n%s" l6_14)
	fscanf(fin "\n%s" l6_15)
	fscanf(fin "\n%s" l6_16)

	fscanf(fin "\n%s" Cc1)
	close(fin) ;; 
)

(procedure chay()
	analysis('dc ?saveOppoint t  )
	analysis('ac ?start "1"  ?stop "1G"  )

	  desVar("w01_1"  w01_1)
	  desVar("w01_2"  w01_2)
	  desVar("w01_3"  w01_3)
	  desVar("w01_4"  w01_4)
	  desVar("w01_5"  w01_5)
	  desVar("w01_6"  w01_6)
	  desVar("w01_7"  w01_7)
	  desVar("w01_8"  w01_8)
	  desVar("w01_9"  w01_9)
	  desVar("w01_10" w01_10)
	  desVar("w01_11" w01_11)
	  desVar("w01_12" w01_12)
	  desVar("w01_13" w01_13)
	  desVar("w01_14" w01_14)
	  desVar("w01_15" w01_15)
	  desVar("w01_16" w01_16)

	  desVar("l01_1"  l01_1)
	  desVar("l01_2"  l01_2)
	  desVar("l01_3"  l01_3)
	  desVar("l01_4"  l01_4)
	  desVar("l01_5"  l01_5)
	  desVar("l01_6"  l01_6)
	  desVar("l01_7"  l01_7)
	  desVar("l01_8"  l01_8)
	  desVar("l01_9"  l01_9)
	  desVar("l01_10" l01_10)
	  desVar("l01_11" l01_11)
	  desVar("l01_12" l01_12)
	  desVar("l01_13" l01_13)
	  desVar("l01_14" l01_14)
	  desVar("l01_15" l01_15)
	  desVar("l01_16" l01_16)

	  desVar("w23_1"  w23_1)
	  desVar("w23_2"  w23_2)
	  desVar("w23_3"  w23_3)
	  desVar("w23_4"  w23_4)
	  desVar("w23_5"  w23_5)
	  desVar("w23_6"  w23_6)
	  desVar("w23_7"  w23_7)
	  desVar("w23_8"  w23_8)
	  desVar("w23_9"  w23_9)
	  desVar("w23_10" w23_10)
	  desVar("w23_11" w23_11)
	  desVar("w23_12" w23_12)
	  desVar("w23_13" w23_13)
	  desVar("w23_14" w23_14)
	  desVar("w23_15" w23_15)
	  desVar("w23_16" w23_16)

	  desVar("l23_1"  l23_1)
	  desVar("l23_2"  l23_2)
	  desVar("l23_3"  l23_3)
	  desVar("l23_4"  l23_4)
	  desVar("l23_5"  l23_5)
	  desVar("l23_6"  l23_6)
	  desVar("l23_7"  l23_7)
	  desVar("l23_8"  l23_8)
	  desVar("l23_9"  l23_9)
	  desVar("l23_10" l23_10)
	  desVar("l23_11" l23_11)
	  desVar("l23_12" l23_12)
	  desVar("l23_13" l23_13)
	  desVar("l23_14" l23_14)
	  desVar("l23_15" l23_15)
	  desVar("l23_16" l23_16)

	  desVar("w47_1"  w47_1)
	  desVar("w47_2"  w47_2)
	  desVar("w47_3"  w47_3)
	  desVar("w47_4"  w47_4)
	  desVar("w47_5"  w47_5)
	  desVar("w47_6"  w47_6)
	  desVar("w47_7"  w47_7)
	  desVar("w47_8"  w47_8)
	  desVar("w47_9"  w47_9)
	  desVar("w47_10" w47_10)
	  desVar("w47_11" w47_11)
	  desVar("w47_12" w47_12)
	  desVar("w47_13" w47_13)
	  desVar("w47_14" w47_14)
	  desVar("w47_15" w47_15)
	  desVar("w47_16" w47_16)

	  desVar("w5_1"  w5_1)
	  desVar("w5_2"  w5_2)
	  desVar("w5_3"  w5_3)
	  desVar("w5_4"  w5_4)
	  desVar("w5_5"  w5_5)
	  desVar("w5_6"  w5_6)
	  desVar("w5_7"  w5_7)
	  desVar("w5_8"  w5_8)
	  desVar("w5_9"  w5_9)
	  desVar("w5_10" w5_10)
	  desVar("w5_11" w5_11)
	  desVar("w5_12" w5_12)
	  desVar("w5_13" w5_13)
	  desVar("w5_14" w5_14)
	  desVar("w5_15" w5_15)
	  desVar("w5_16" w5_16)

	  desVar("l457_1"  l457_1)
	  desVar("l457_2"  l457_2)
	  desVar("l457_3"  l457_3)
	  desVar("l457_4"  l457_4)
	  desVar("l457_5"  l457_5)
	  desVar("l457_6"  l457_6)
	  desVar("l457_7"  l457_7)
	  desVar("l457_8"  l457_8)
	  desVar("l457_9"  l457_9)
	  desVar("l457_10" l457_10)
	  desVar("l457_11" l457_11)
	  desVar("l457_12" l457_12)
	  desVar("l457_13" l457_13)
	  desVar("l457_14" l457_14)
	  desVar("l457_15" l457_15)
	  desVar("l457_16" l457_16)

	  desVar("w6_1"  w6_1)
	  desVar("w6_2"  w6_2)
	  desVar("w6_3"  w6_3)
	  desVar("w6_4"  w6_4)
	  desVar("w6_5"  w6_5)
	  desVar("w6_6"  w6_6)
	  desVar("w6_7"  w6_7)
	  desVar("w6_8"  w6_8)
	  desVar("w6_9"  w6_9)
	  desVar("w6_10" w6_10)
	  desVar("w6_11" w6_11)
	  desVar("w6_12" w6_12)
	  desVar("w6_13" w6_13)
	  desVar("w6_14" w6_14)
	  desVar("w6_15" w6_15)
	  desVar("w6_16" w6_16)

	  desVar("l6_1"  l6_1)
	  desVar("l6_2"  l6_2)
	  desVar("l6_3"  l6_3)
	  desVar("l6_4"  l6_4)
	  desVar("l6_5"  l6_5)
	  desVar("l6_6"  l6_6)
	  desVar("l6_7"  l6_7)
	  desVar("l6_8"  l6_8)
	  desVar("l6_9"  l6_9)
	  desVar("l6_10" l6_10)
	  desVar("l6_11" l6_11)
	  desVar("l6_12" l6_12)
	  desVar("l6_13" l6_13)
	  desVar("l6_14" l6_14)
	  desVar("l6_15" l6_15)
	  desVar("l6_16" l6_16)

	  desVar("Cc1"  Cc1)


	envOption(
		'analysisOrder  list("dc" "ac") 
	)

	temp( 27 ) 
	run()
	
	
	fout=outfile("./Up_result.txt")
	;;TINH TOAN
	;;-----------------------------------------------

 	von_marg_m0_1  = OP("/M0_1","vgt")
	von_marg_m1_1  = OP("/M1_1","vgt")
	von_marg_m2_1  = -OP("/M2_1","vgt") ; PMOS
	von_marg_m3_1  = -OP("/M3_1","vgt") ; PMOS
	von_marg_m4_1  = OP("/M4_1","vgt")
	von_marg_m5_1  = OP("/M5_1","vgt")
	von_marg_m6_1  = -OP("/M6_1","vgt") ; PMOS
	von_marg_m7_1  = OP("/M7_1","vgt")
	vsat_marg_m0_1 = OP("/M0_1","vsat_marg")
	vsat_marg_m1_1 = OP("/M1_1","vsat_marg")
	vsat_marg_m2_1 = OP("/M2_1","vsat_marg")
	vsat_marg_m3_1 = OP("/M3_1","vsat_marg")
	vsat_marg_m4_1 = OP("/M4_1","vsat_marg")
	vsat_marg_m5_1 = OP("/M5_1","vsat_marg")
	vsat_marg_m6_1 = OP("/M6_1","vsat_marg")
	vsat_marg_m7_1 = OP("/M7_1","vsat_marg")
	region_m0_1    = OP("/M0_1","region")
	region_m1_1    = OP("/M1_1","region")
	region_m2_1    = OP("/M2_1","region")
	region_m3_1    = OP("/M3_1","region")
	region_m4_1    = OP("/M4_1","region")
	region_m5_1    = OP("/M5_1","region")
	region_m6_1    = OP("/M6_1","region")
	region_m7_1    = OP("/M7_1","region")

	if(((von_marg_m0_1 > 0.03) && (vsat_marg_m0_1 > 0.03) && (region_m0_1 == 2) != 0) then cond_m0_1 = 1 else cond_m0_1 = 0)
  	if(((von_marg_m1_1 > 0.03) && (vsat_marg_m1_1 > 0.03) && (region_m1_1 == 2) != 0) then cond_m1_1 = 1 else cond_m1_1 = 0)
  	if(((von_marg_m2_1 > 0.03) && (vsat_marg_m2_1 > 0.03) && (region_m2_1 == 2) != 0) then cond_m2_1 = 1 else cond_m2_1 = 0)
  	if(((von_marg_m3_1 > 0.03) && (vsat_marg_m3_1 > 0.03) && (region_m3_1 == 2) != 0) then cond_m3_1 = 1 else cond_m3_1 = 0)
  	if(((von_marg_m4_1 > 0.03) && (vsat_marg_m4_1 > 0.03) && (region_m4_1 == 2) != 0) then cond_m4_1 = 1 else cond_m4_1 = 0)
  	if(((von_marg_m5_1 > 0.03) && (vsat_marg_m5_1 > 0.03) && (region_m5_1 == 2) != 0) then cond_m5_1 = 1 else cond_m5_1 = 0)
  	if(((von_marg_m6_1 > 0.03) && (vsat_marg_m6_1 > 0.03) && (region_m6_1 == 2) != 0) then cond_m6_1 = 1 else cond_m6_1 = 0)
  	if(((von_marg_m7_1 > 0.03) && (vsat_marg_m7_1 > 0.03) && (region_m7_1 == 2) != 0) then cond_m7_1 = 1 else cond_m7_1 = 0)

	if(((cond_m0_1 == 1) && (cond_m1_1 == 1) && (cond_m2_1 == 1) && (cond_m3_1 == 1) && (cond_m4_1 == 1) && (cond_m5_1 == 1) && (cond_m6_1 == 1) && (cond_m7_1 == 1) != 0) then cond_1 = 1 else cond_1 = 0)	
	
	
	PM_1 = phaseMargin((VF("/out_1") / VF("/in_p")))
	DC_gain_1 = value(dB20((VF("/out_1") / VF("/in_p"))) 1)
	UGB_1 = unityGainFreq((VF("/out_1") / VF("/in_p")))
	Power_1 = (1.2 * (OP("/M5_1" "id") + OP("/M4_1" "id")))

	fprintf(fout "%d\n", cond_1)
	fprintf(fout "%f\n", PM_1)
  	fprintf(fout "%f\n", DC_gain_1)
	fprintf(fout "%f\n", UGB_1*1e-6)
  	fprintf(fout "%f\n", Power_1*1e+6)
	fprintf(fout "\n")

	;;---------------------------------------------
	von_marg_m0_2  = OP("/M0_2","vgt")
	von_marg_m1_2  = OP("/M1_2","vgt")
	von_marg_m2_2  = -OP("/M2_2","vgt") ; PMOS
	von_marg_m3_2  = -OP("/M3_2","vgt") ; PMOS
	von_marg_m4_2  = OP("/M4_2","vgt")
	von_marg_m5_2  = OP("/M5_2","vgt")
	von_marg_m6_2  = -OP("/M6_2","vgt") ; PMOS
	von_marg_m7_2  = OP("/M7_2","vgt")
	vsat_marg_m0_2 = OP("/M0_2","vsat_marg")
	vsat_marg_m1_2 = OP("/M1_2","vsat_marg")
	vsat_marg_m2_2 = OP("/M2_2","vsat_marg")
	vsat_marg_m3_2 = OP("/M3_2","vsat_marg")
	vsat_marg_m4_2 = OP("/M4_2","vsat_marg")
	vsat_marg_m5_2 = OP("/M5_2","vsat_marg")
	vsat_marg_m6_2 = OP("/M6_2","vsat_marg")
	vsat_marg_m7_2 = OP("/M7_2","vsat_marg")
	region_m0_2    = OP("/M0_2","region")
	region_m1_2    = OP("/M1_2","region")
	region_m2_2    = OP("/M2_2","region")
	region_m3_2    = OP("/M3_2","region")
	region_m4_2    = OP("/M4_2","region")
	region_m5_2    = OP("/M5_2","region")
	region_m6_2    = OP("/M6_2","region")
	region_m7_2    = OP("/M7_2","region")

	if(((von_marg_m0_2 > 0.03) && (vsat_marg_m0_2 > 0.03) && (region_m0_2 == 2) != 0) then cond_m0_2 = 1 else cond_m0_2 = 0)
  	if(((von_marg_m1_2 > 0.03) && (vsat_marg_m1_2 > 0.03) && (region_m1_2 == 2) != 0) then cond_m1_2 = 1 else cond_m1_2 = 0)
  	if(((von_marg_m2_2 > 0.03) && (vsat_marg_m2_2 > 0.03) && (region_m2_2 == 2) != 0) then cond_m2_2 = 1 else cond_m2_2 = 0)
  	if(((von_marg_m3_2 > 0.03) && (vsat_marg_m3_2 > 0.03) && (region_m3_2 == 2) != 0) then cond_m3_2 = 1 else cond_m3_2 = 0)
  	if(((von_marg_m4_2 > 0.03) && (vsat_marg_m4_2 > 0.03) && (region_m4_2 == 2) != 0) then cond_m4_2 = 1 else cond_m4_2 = 0)
  	if(((von_marg_m5_2 > 0.03) && (vsat_marg_m5_2 > 0.03) && (region_m5_2 == 2) != 0) then cond_m5_2 = 1 else cond_m5_2 = 0)
  	if(((von_marg_m6_2 > 0.03) && (vsat_marg_m6_2 > 0.03) && (region_m6_2 == 2) != 0) then cond_m6_2 = 1 else cond_m6_2 = 0)
  	if(((von_marg_m7_2 > 0.03) && (vsat_marg_m7_2 > 0.03) && (region_m7_2 == 2) != 0) then cond_m7_2 = 1 else cond_m7_2 = 0)

	if(((cond_m0_2 == 1) && (cond_m1_2 == 1) && (cond_m2_2 == 1) && (cond_m3_2 == 1) && (cond_m4_2 == 1) && (cond_m5_2 == 1) && (cond_m6_2 == 1) && (cond_m7_2 == 1) != 0) then cond_2 = 1 else cond_2 = 0)	

	PM_2 = phaseMargin((VF("/out_2") / VF("/in_p")))
	DC_gain_2 = value(dB20((VF("/out_2") / VF("/in_p"))) 1)
	UGB_2 = unityGainFreq((VF("/out_2") / VF("/in_p")))
	Power_2 = (1.2 * (OP("/M5_2" "id") + OP("/M4_2" "id")))
	
	fprintf(fout "%d\n", cond_2)	
	fprintf(fout "%f\n", PM_2)
  	fprintf(fout "%f\n", DC_gain_2)
	fprintf(fout "%f\n", UGB_2*1e-6)
  	fprintf(fout "%f\n", Power_2*1e+6)
	fprintf(fout "\n")

	;;---------------------------------------------
	von_marg_m0_3  = OP("/M0_3","vgt")
	von_marg_m1_3  = OP("/M1_3","vgt")
	von_marg_m2_3  = -OP("/M2_3","vgt") ; PMOS
	von_marg_m3_3  = -OP("/M3_3","vgt") ; PMOS
	von_marg_m4_3  = OP("/M4_3","vgt")
	von_marg_m5_3  = OP("/M5_3","vgt")
	von_marg_m6_3  = -OP("/M6_3","vgt") ; PMOS
	von_marg_m7_3  = OP("/M7_3","vgt")
	vsat_marg_m0_3 = OP("/M0_3","vsat_marg")
	vsat_marg_m1_3 = OP("/M1_3","vsat_marg")
	vsat_marg_m2_3 = OP("/M2_3","vsat_marg")
	vsat_marg_m3_3 = OP("/M3_3","vsat_marg")
	vsat_marg_m4_3 = OP("/M4_3","vsat_marg")
	vsat_marg_m5_3 = OP("/M5_3","vsat_marg")
	vsat_marg_m6_3 = OP("/M6_3","vsat_marg")
	vsat_marg_m7_3 = OP("/M7_3","vsat_marg")
	region_m0_3    = OP("/M0_3","region")
	region_m1_3    = OP("/M1_3","region")
	region_m2_3    = OP("/M2_3","region")
	region_m3_3    = OP("/M3_3","region")
	region_m4_3    = OP("/M4_3","region")
	region_m5_3    = OP("/M5_3","region")
	region_m6_3    = OP("/M6_3","region")
	region_m7_3    = OP("/M7_3","region")

	if(((von_marg_m0_3 > 0.03) && (vsat_marg_m0_3 > 0.03) && (region_m0_3 == 2) != 0) then cond_m0_3 = 1 else cond_m0_3 = 0)
  	if(((von_marg_m1_3 > 0.03) && (vsat_marg_m1_3 > 0.03) && (region_m1_3 == 2) != 0) then cond_m1_3 = 1 else cond_m1_3 = 0)
  	if(((von_marg_m2_3 > 0.03) && (vsat_marg_m2_3 > 0.03) && (region_m2_3 == 2) != 0) then cond_m2_3 = 1 else cond_m2_3 = 0)
  	if(((von_marg_m3_3 > 0.03) && (vsat_marg_m3_3 > 0.03) && (region_m3_3 == 2) != 0) then cond_m3_3 = 1 else cond_m3_3 = 0)
  	if(((von_marg_m4_3 > 0.03) && (vsat_marg_m4_3 > 0.03) && (region_m4_3 == 2) != 0) then cond_m4_3 = 1 else cond_m4_3 = 0)
  	if(((von_marg_m5_3 > 0.03) && (vsat_marg_m5_3 > 0.03) && (region_m5_3 == 2) != 0) then cond_m5_3 = 1 else cond_m5_3 = 0)
  	if(((von_marg_m6_3 > 0.03) && (vsat_marg_m6_3 > 0.03) && (region_m6_3 == 2) != 0) then cond_m6_3 = 1 else cond_m6_3 = 0)
  	if(((von_marg_m7_3 > 0.03) && (vsat_marg_m7_3 > 0.03) && (region_m7_3 == 2) != 0) then cond_m7_3 = 1 else cond_m7_3 = 0)

	if(((cond_m0_3 == 1) && (cond_m1_3 == 1) && (cond_m2_3 == 1) && (cond_m3_3 == 1) && (cond_m4_3 == 1) && (cond_m5_3 == 1) && (cond_m6_3 == 1) && (cond_m7_3 == 1) != 0) then cond_3 = 1 else cond_3 = 0)	

	fprintf(fout "%d\n", cond_3)	
	PM_3 = phaseMargin((VF("/out_3") / VF("/in_p")))
	DC_gain_3 = value(dB20((VF("/out_3") / VF("/in_p"))) 1)
	UGB_3 = unityGainFreq((VF("/out_3") / VF("/in_p")))
	Power_3 = (1.2 * (OP("/M5_3" "id") + OP("/M4_3" "id")))

	fprintf(fout "%f\n", PM_3)
  	fprintf(fout "%f\n", DC_gain_3)
	fprintf(fout "%f\n", UGB_3*1e-6)
  	fprintf(fout "%f\n", Power_3*1e+6)
	fprintf(fout "\n")

	;;---------------------------------------------
	von_marg_m0_4  = OP("/M0_4","vgt")
	von_marg_m1_4  = OP("/M1_4","vgt")
	von_marg_m2_4  = -OP("/M2_4","vgt") ; PMOS
	von_marg_m3_4  = -OP("/M3_4","vgt") ; PMOS
	von_marg_m4_4  = OP("/M4_4","vgt")
	von_marg_m5_4  = OP("/M5_4","vgt")
	von_marg_m6_4  = -OP("/M6_4","vgt") ; PMOS
	von_marg_m7_4  = OP("/M7_4","vgt")
	vsat_marg_m0_4 = OP("/M0_4","vsat_marg")
	vsat_marg_m1_4 = OP("/M1_4","vsat_marg")
	vsat_marg_m2_4 = OP("/M2_4","vsat_marg")
	vsat_marg_m3_4 = OP("/M3_4","vsat_marg")
	vsat_marg_m4_4 = OP("/M4_4","vsat_marg")
	vsat_marg_m5_4 = OP("/M5_4","vsat_marg")
	vsat_marg_m6_4 = OP("/M6_4","vsat_marg")
	vsat_marg_m7_4 = OP("/M7_4","vsat_marg")
	region_m0_4    = OP("/M0_4","region")
	region_m1_4    = OP("/M1_4","region")
	region_m2_4    = OP("/M2_4","region")
	region_m3_4    = OP("/M3_4","region")
	region_m4_4    = OP("/M4_4","region")
	region_m5_4    = OP("/M5_4","region")
	region_m6_4    = OP("/M6_4","region")
	region_m7_4    = OP("/M7_4","region")

	if(((von_marg_m0_4 > 0.03) && (vsat_marg_m0_4 > 0.03) && (region_m0_4 == 2) != 0) then cond_m0_4 = 1 else cond_m0_4 = 0)
  	if(((von_marg_m1_4 > 0.03) && (vsat_marg_m1_4 > 0.03) && (region_m1_4 == 2) != 0) then cond_m1_4 = 1 else cond_m1_4 = 0)
  	if(((von_marg_m2_4 > 0.03) && (vsat_marg_m2_4 > 0.03) && (region_m2_4 == 2) != 0) then cond_m2_4 = 1 else cond_m2_4 = 0)
  	if(((von_marg_m3_4 > 0.03) && (vsat_marg_m3_4 > 0.03) && (region_m3_4 == 2) != 0) then cond_m3_4 = 1 else cond_m3_4 = 0)
  	if(((von_marg_m4_4 > 0.03) && (vsat_marg_m4_4 > 0.03) && (region_m4_4 == 2) != 0) then cond_m4_4 = 1 else cond_m4_4 = 0)
  	if(((von_marg_m5_4 > 0.03) && (vsat_marg_m5_4 > 0.03) && (region_m5_4 == 2) != 0) then cond_m5_4 = 1 else cond_m5_4 = 0)
  	if(((von_marg_m6_4 > 0.03) && (vsat_marg_m6_4 > 0.03) && (region_m6_4 == 2) != 0) then cond_m6_4 = 1 else cond_m6_4 = 0)
  	if(((von_marg_m7_4 > 0.03) && (vsat_marg_m7_4 > 0.03) && (region_m7_4 == 2) != 0) then cond_m7_4 = 1 else cond_m7_4 = 0)

	if(((cond_m0_4 == 1) && (cond_m1_4 == 1) && (cond_m2_4 == 1) && (cond_m3_4 == 1) && (cond_m4_4 == 1) && (cond_m5_4 == 1) && (cond_m6_4 == 1) && (cond_m7_4 == 1) != 0) then cond_4 = 1 else cond_4 = 0)	

	
	PM_4 = phaseMargin((VF("/out_4") / VF("/in_p")))
	DC_gain_4 = value(dB20((VF("/out_4") / VF("/in_p"))) 1)
	UGB_4 = unityGainFreq((VF("/out_4") / VF("/in_p")))
	Power_4 = (1.2 * (OP("/M5_4" "id") + OP("/M4_4" "id")))
	
	fprintf(fout "%d\n", cond_4)
	fprintf(fout "%f\n", PM_4)
  	fprintf(fout "%f\n", DC_gain_4)
	fprintf(fout "%f\n", UGB_4*1e-6)
  	fprintf(fout "%f\n", Power_4*1e+6)
	fprintf(fout "\n")

	;;---------------------------------------------
	von_marg_m0_5  = OP("/M0_5","vgt")
	von_marg_m1_5  = OP("/M1_5","vgt")
	von_marg_m2_5  = -OP("/M2_5","vgt") ; PMOS
	von_marg_m3_5  = -OP("/M3_5","vgt") ; PMOS
	von_marg_m4_5  = OP("/M4_5","vgt")
	von_marg_m5_5  = OP("/M5_5","vgt")
	von_marg_m6_5  = -OP("/M6_5","vgt") ; PMOS
	von_marg_m7_5  = OP("/M7_5","vgt")
	vsat_marg_m0_5 = OP("/M0_5","vsat_marg")
	vsat_marg_m1_5 = OP("/M1_5","vsat_marg")
	vsat_marg_m2_5 = OP("/M2_5","vsat_marg")
	vsat_marg_m3_5 = OP("/M3_5","vsat_marg")
	vsat_marg_m4_5 = OP("/M4_5","vsat_marg")
	vsat_marg_m5_5 = OP("/M5_5","vsat_marg")
	vsat_marg_m6_5 = OP("/M6_5","vsat_marg")
	vsat_marg_m7_5 = OP("/M7_5","vsat_marg")
	region_m0_5    = OP("/M0_5","region")
	region_m1_5    = OP("/M1_5","region")
	region_m2_5    = OP("/M2_5","region")
	region_m3_5    = OP("/M3_5","region")
	region_m4_5    = OP("/M4_5","region")
	region_m5_5    = OP("/M5_5","region")
	region_m6_5    = OP("/M6_5","region")
	region_m7_5    = OP("/M7_5","region")

	if(((von_marg_m0_5 > 0.03) && (vsat_marg_m0_5 > 0.03) && (region_m0_5 == 2) != 0) then cond_m0_5 = 1 else cond_m0_5 = 0)
  	if(((von_marg_m1_5 > 0.03) && (vsat_marg_m1_5 > 0.03) && (region_m1_5 == 2) != 0) then cond_m1_5 = 1 else cond_m1_5 = 0)
  	if(((von_marg_m2_5 > 0.03) && (vsat_marg_m2_5 > 0.03) && (region_m2_5 == 2) != 0) then cond_m2_5 = 1 else cond_m2_5 = 0)
  	if(((von_marg_m3_5 > 0.03) && (vsat_marg_m3_5 > 0.03) && (region_m3_5 == 2) != 0) then cond_m3_5 = 1 else cond_m3_5 = 0)
  	if(((von_marg_m4_5 > 0.03) && (vsat_marg_m4_5 > 0.03) && (region_m4_5 == 2) != 0) then cond_m4_5 = 1 else cond_m4_5 = 0)
  	if(((von_marg_m5_5 > 0.03) && (vsat_marg_m5_5 > 0.03) && (region_m5_5 == 2) != 0) then cond_m5_5 = 1 else cond_m5_5 = 0)
  	if(((von_marg_m6_5 > 0.03) && (vsat_marg_m6_5 > 0.03) && (region_m6_5 == 2) != 0) then cond_m6_5 = 1 else cond_m6_5 = 0)
  	if(((von_marg_m7_5 > 0.03) && (vsat_marg_m7_5 > 0.03) && (region_m7_5 == 2) != 0) then cond_m7_5 = 1 else cond_m7_5 = 0)

	if(((cond_m0_5 == 1) && (cond_m1_5 == 1) && (cond_m2_5 == 1) && (cond_m3_5 == 1) && (cond_m4_5 == 1) && (cond_m5_5 == 1) && (cond_m6_5 == 1) && (cond_m7_5 == 1) != 0) then cond_5 = 1 else cond_5 = 0)	

		
	PM_5 = phaseMargin((VF("/out_5") / VF("/in_p")))
	DC_gain_5 = value(dB20((VF("/out_5") / VF("/in_p"))) 1)
	UGB_5 = unityGainFreq((VF("/out_5") / VF("/in_p")))
	Power_5 = (1.2 * (OP("/M5_5" "id") + OP("/M4_5" "id")))
	
	fprintf(fout "%d\n", cond_5)
	fprintf(fout "%f\n", PM_5)
  	fprintf(fout "%f\n", DC_gain_5)
	fprintf(fout "%f\n", UGB_5*1e-6)
  	fprintf(fout "%f\n", Power_5*1e+6)
	fprintf(fout "\n")

	;;---------------------------------------------
	von_marg_m0_6  = OP("/M0_6","vgt")
	von_marg_m1_6  = OP("/M1_6","vgt")
	von_marg_m2_6  = -OP("/M2_6","vgt") ; PMOS
	von_marg_m3_6  = -OP("/M3_6","vgt") ; PMOS
	von_marg_m4_6  = OP("/M4_6","vgt")
	von_marg_m5_6  = OP("/M5_6","vgt")
	von_marg_m6_6  = -OP("/M6_6","vgt") ; PMOS
	von_marg_m7_6  = OP("/M7_6","vgt")
	vsat_marg_m0_6 = OP("/M0_6","vsat_marg")
	vsat_marg_m1_6 = OP("/M1_6","vsat_marg")
	vsat_marg_m2_6 = OP("/M2_6","vsat_marg")
	vsat_marg_m3_6 = OP("/M3_6","vsat_marg")
	vsat_marg_m4_6 = OP("/M4_6","vsat_marg")
	vsat_marg_m5_6 = OP("/M5_6","vsat_marg")
	vsat_marg_m6_6 = OP("/M6_6","vsat_marg")
	vsat_marg_m7_6 = OP("/M7_6","vsat_marg")
	region_m0_6    = OP("/M0_6","region")
	region_m1_6    = OP("/M1_6","region")
	region_m2_6    = OP("/M2_6","region")
	region_m3_6    = OP("/M3_6","region")
	region_m4_6    = OP("/M4_6","region")
	region_m5_6    = OP("/M5_6","region")
	region_m6_6    = OP("/M6_6","region")
	region_m7_6    = OP("/M7_6","region")

	if(((von_marg_m0_6 > 0.03) && (vsat_marg_m0_6 > 0.03) && (region_m0_6 == 2) != 0) then cond_m0_6 = 1 else cond_m0_6 = 0)
  	if(((von_marg_m1_6 > 0.03) && (vsat_marg_m1_6 > 0.03) && (region_m1_6 == 2) != 0) then cond_m1_6 = 1 else cond_m1_6 = 0)
  	if(((von_marg_m2_6 > 0.03) && (vsat_marg_m2_6 > 0.03) && (region_m2_6 == 2) != 0) then cond_m2_6 = 1 else cond_m2_6 = 0)
  	if(((von_marg_m3_6 > 0.03) && (vsat_marg_m3_6 > 0.03) && (region_m3_6 == 2) != 0) then cond_m3_6 = 1 else cond_m3_6 = 0)
  	if(((von_marg_m4_6 > 0.03) && (vsat_marg_m4_6 > 0.03) && (region_m4_6 == 2) != 0) then cond_m4_6 = 1 else cond_m4_6 = 0)
  	if(((von_marg_m5_6 > 0.03) && (vsat_marg_m5_6 > 0.03) && (region_m5_6 == 2) != 0) then cond_m5_6 = 1 else cond_m5_6 = 0)
  	if(((von_marg_m6_6 > 0.03) && (vsat_marg_m6_6 > 0.03) && (region_m6_6 == 2) != 0) then cond_m6_6 = 1 else cond_m6_6 = 0)
  	if(((von_marg_m7_6 > 0.03) && (vsat_marg_m7_6 > 0.03) && (region_m7_6 == 2) != 0) then cond_m7_6 = 1 else cond_m7_6 = 0)

	if(((cond_m0_6 == 1) && (cond_m1_6 == 1) && (cond_m2_6 == 1) && (cond_m3_6 == 1) && (cond_m4_6 == 1) && (cond_m5_6== 1) && (cond_m6_6 == 1) && (cond_m7_6 == 1) != 0) then cond_6 = 1 else cond_6 = 0)	
	
	PM_6 = phaseMargin((VF("/out_6") / VF("/in_p")))
	DC_gain_6 = value(dB20((VF("/out_6") / VF("/in_p"))) 1)
	UGB_6 = unityGainFreq((VF("/out_6") / VF("/in_p")))
	Power_6 = (1.2 * (OP("/M5_6" "id") + OP("/M4_6" "id")))
	
	fprintf(fout "%d\n", cond_6)
	fprintf(fout "%f\n", PM_6)
  	fprintf(fout "%f\n", DC_gain_6)
	fprintf(fout "%f\n", UGB_6*1e-6)
  	fprintf(fout "%f\n", Power_6*1e+6)
	fprintf(fout "\n")

	;;---------------------------------------------
	von_marg_m0_7  = OP("/M0_7","vgt")
	von_marg_m1_7  = OP("/M1_7","vgt")
	von_marg_m2_7  = -OP("/M2_7","vgt") ; PMOS
	von_marg_m3_7  = -OP("/M3_7","vgt") ; PMOS
	von_marg_m4_7  = OP("/M4_7","vgt")
	von_marg_m5_7  = OP("/M5_7","vgt")
	von_marg_m6_7  = -OP("/M6_7","vgt") ; PMOS
	von_marg_m7_7  = OP("/M7_7","vgt")
	vsat_marg_m0_7 = OP("/M0_7","vsat_marg")
	vsat_marg_m1_7 = OP("/M1_7","vsat_marg")
	vsat_marg_m2_7 = OP("/M2_7","vsat_marg")
	vsat_marg_m3_7 = OP("/M3_7","vsat_marg")
	vsat_marg_m4_7 = OP("/M4_7","vsat_marg")
	vsat_marg_m5_7 = OP("/M5_7","vsat_marg")
	vsat_marg_m6_7 = OP("/M6_7","vsat_marg")
	vsat_marg_m7_7 = OP("/M7_7","vsat_marg")
	region_m0_7    = OP("/M0_7","region")
	region_m1_7    = OP("/M1_7","region")
	region_m2_7    = OP("/M2_7","region")
	region_m3_7    = OP("/M3_7","region")
	region_m4_7    = OP("/M4_7","region")
	region_m5_7    = OP("/M5_7","region")
	region_m6_7    = OP("/M6_7","region")
	region_m7_7    = OP("/M7_7","region")

	if(((von_marg_m0_7 > 0.03) && (vsat_marg_m0_7 > 0.03) && (region_m0_7 == 2) != 0) then cond_m0_7 = 1 else cond_m0_7 = 0)
  	if(((von_marg_m1_7 > 0.03) && (vsat_marg_m1_7 > 0.03) && (region_m1_7 == 2) != 0) then cond_m1_7 = 1 else cond_m1_7 = 0)
  	if(((von_marg_m2_7 > 0.03) && (vsat_marg_m2_7 > 0.03) && (region_m2_7 == 2) != 0) then cond_m2_7 = 1 else cond_m2_7 = 0)
  	if(((von_marg_m3_7 > 0.03) && (vsat_marg_m3_7 > 0.03) && (region_m3_7 == 2) != 0) then cond_m3_7 = 1 else cond_m3_7 = 0)
  	if(((von_marg_m4_7 > 0.03) && (vsat_marg_m4_7 > 0.03) && (region_m4_7 == 2) != 0) then cond_m4_7 = 1 else cond_m4_7 = 0)
  	if(((von_marg_m5_7 > 0.03) && (vsat_marg_m5_7 > 0.03) && (region_m5_7 == 2) != 0) then cond_m5_7 = 1 else cond_m5_7 = 0)
  	if(((von_marg_m6_7 > 0.03) && (vsat_marg_m6_7 > 0.03) && (region_m6_7 == 2) != 0) then cond_m6_7 = 1 else cond_m6_7 = 0)
  	if(((von_marg_m7_7 > 0.03) && (vsat_marg_m7_7 > 0.03) && (region_m7_7 == 2) != 0) then cond_m7_7 = 1 else cond_m7_7 = 0)

	if(((cond_m0_7 == 1) && (cond_m1_7 == 1) && (cond_m2_7 == 1) && (cond_m3_7 == 1) && (cond_m4_7 == 1) && (cond_m5_7 == 1) && (cond_m6_7 == 1) && (cond_m7_7 == 1) != 0) then cond_7 = 1 else cond_7 = 0)	

	PM_7 = phaseMargin((VF("/out_7") / VF("/in_p")))
	DC_gain_7 = value(dB20((VF("/out_7") / VF("/in_p"))) 1)
	UGB_7 = unityGainFreq((VF("/out_7") / VF("/in_p")))
	Power_7 = (1.2 * (OP("/M5_7" "id") + OP("/M4_7" "id")))

	fprintf(fout "%d\n", cond_7)
	fprintf(fout "%f\n", PM_7)
  	fprintf(fout "%f\n", DC_gain_7)
	fprintf(fout "%f\n", UGB_7*1e-6)
  	fprintf(fout "%f\n", Power_7*1e+6)
	fprintf(fout "\n")

	;;---------------------------------------------
	von_marg_m0_8  = OP("/M0_8","vgt")
	von_marg_m1_8  = OP("/M1_8","vgt")
	von_marg_m2_8  = -OP("/M2_8","vgt") ; PMOS
	von_marg_m3_8  = -OP("/M3_8","vgt") ; PMOS
	von_marg_m4_8  = OP("/M4_8","vgt")
	von_marg_m5_8  = OP("/M5_8","vgt")
	von_marg_m6_8  = -OP("/M6_8","vgt") ; PMOS
	von_marg_m7_8  = OP("/M7_8","vgt")
	vsat_marg_m0_8 = OP("/M0_8","vsat_marg")
	vsat_marg_m1_8 = OP("/M1_8","vsat_marg")
	vsat_marg_m2_8 = OP("/M2_8","vsat_marg")
	vsat_marg_m3_8 = OP("/M3_8","vsat_marg")
	vsat_marg_m4_8 = OP("/M4_8","vsat_marg")
	vsat_marg_m5_8 = OP("/M5_8","vsat_marg")
	vsat_marg_m6_8 = OP("/M6_8","vsat_marg")
	vsat_marg_m7_8 = OP("/M7_8","vsat_marg")
	region_m0_8    = OP("/M0_8","region")
	region_m1_8    = OP("/M1_8","region")
	region_m2_8    = OP("/M2_8","region")
	region_m3_8    = OP("/M3_8","region")
	region_m4_8    = OP("/M4_8","region")
	region_m5_8    = OP("/M5_8","region")
	region_m6_8    = OP("/M6_8","region")
	region_m7_8    = OP("/M7_8","region")

	if(((von_marg_m0_8 > 0.03) && (vsat_marg_m0_8 > 0.03) && (region_m0_8 == 2) != 0) then cond_m0_8 = 1 else cond_m0_8 = 0)
  	if(((von_marg_m1_8 > 0.03) && (vsat_marg_m1_8 > 0.03) && (region_m1_8 == 2) != 0) then cond_m1_8 = 1 else cond_m1_8 = 0)
  	if(((von_marg_m2_8 > 0.03) && (vsat_marg_m2_8 > 0.03) && (region_m2_8 == 2) != 0) then cond_m2_8 = 1 else cond_m2_8 = 0)
  	if(((von_marg_m3_8 > 0.03) && (vsat_marg_m3_8 > 0.03) && (region_m3_8 == 2) != 0) then cond_m3_8 = 1 else cond_m3_8 = 0)
  	if(((von_marg_m4_8 > 0.03) && (vsat_marg_m4_8 > 0.03) && (region_m4_8 == 2) != 0) then cond_m4_8 = 1 else cond_m4_8 = 0)
  	if(((von_marg_m5_8 > 0.03) && (vsat_marg_m5_8 > 0.03) && (region_m5_8 == 2) != 0) then cond_m5_8 = 1 else cond_m5_8 = 0)
  	if(((von_marg_m6_8 > 0.03) && (vsat_marg_m6_8 > 0.03) && (region_m6_8 == 2) != 0) then cond_m6_8 = 1 else cond_m6_8 = 0)
  	if(((von_marg_m7_8 > 0.03) && (vsat_marg_m7_8 > 0.03) && (region_m7_8 == 2) != 0) then cond_m7_8 = 1 else cond_m7_8 = 0)

	if(((cond_m0_8 == 1) && (cond_m1_8 == 1) && (cond_m2_8 == 1) && (cond_m3_8 == 1) && (cond_m4_8 == 1) && (cond_m5_8 == 1) && (cond_m6_8 == 1) && (cond_m7_8 == 1) != 0) then cond_8 = 1 else cond_8 = 0)	

	PM_8 = phaseMargin((VF("/out_8") / VF("/in_p")))
	DC_gain_8 = value(dB20((VF("/out_8") / VF("/in_p"))) 1)
	UGB_8 = unityGainFreq((VF("/out_8") / VF("/in_p")))
	Power_8 = (1.2 * (OP("/M5_8" "id") + OP("/M4_8" "id")))

	fprintf(fout "%d\n", cond_8)
	fprintf(fout "%f\n", PM_8)
  	fprintf(fout "%f\n", DC_gain_8)
	fprintf(fout "%f\n", UGB_8*1e-6)
  	fprintf(fout "%f\n", Power_8*1e+6)
	fprintf(fout "\n")

	;;---------------------------------------------
	von_marg_m0_9  = OP("/M0_9","vgt")
	von_marg_m1_9  = OP("/M1_9","vgt")
	von_marg_m2_9  = -OP("/M2_9","vgt") ; PMOS
	von_marg_m3_9  = -OP("/M3_9","vgt") ; PMOS
	von_marg_m4_9  = OP("/M4_9","vgt")
	von_marg_m5_9  = OP("/M5_9","vgt")
	von_marg_m6_9  = -OP("/M6_9","vgt") ; PMOS
	von_marg_m7_9  = OP("/M7_9","vgt")
	vsat_marg_m0_9 = OP("/M0_9","vsat_marg")
	vsat_marg_m1_9 = OP("/M1_9","vsat_marg")
	vsat_marg_m2_9 = OP("/M2_9","vsat_marg")
	vsat_marg_m3_9 = OP("/M3_9","vsat_marg")
	vsat_marg_m4_9 = OP("/M4_9","vsat_marg")
	vsat_marg_m5_9 = OP("/M5_9","vsat_marg")
	vsat_marg_m6_9 = OP("/M6_9","vsat_marg")
	vsat_marg_m7_9 = OP("/M7_9","vsat_marg")
	region_m0_9    = OP("/M0_9","region")
	region_m1_9    = OP("/M1_9","region")
	region_m2_9    = OP("/M2_9","region")
	region_m3_9    = OP("/M3_9","region")
	region_m4_9    = OP("/M4_9","region")
	region_m5_9    = OP("/M5_9","region")
	region_m6_9    = OP("/M6_9","region")
	region_m7_9    = OP("/M7_9","region")

	if(((von_marg_m0_9 > 0.03) && (vsat_marg_m0_9 > 0.03) && (region_m0_9 == 2) != 0) then cond_m0_9 = 1 else cond_m0_9 = 0)
  	if(((von_marg_m1_9 > 0.03) && (vsat_marg_m1_9 > 0.03) && (region_m1_9 == 2) != 0) then cond_m1_9 = 1 else cond_m1_9 = 0)
  	if(((von_marg_m2_9 > 0.03) && (vsat_marg_m2_9 > 0.03) && (region_m2_9 == 2) != 0) then cond_m2_9 = 1 else cond_m2_9 = 0)
  	if(((von_marg_m3_9 > 0.03) && (vsat_marg_m3_9 > 0.03) && (region_m3_9 == 2) != 0) then cond_m3_9 = 1 else cond_m3_9 = 0)
  	if(((von_marg_m4_9 > 0.03) && (vsat_marg_m4_9 > 0.03) && (region_m4_9 == 2) != 0) then cond_m4_9 = 1 else cond_m4_9 = 0)
  	if(((von_marg_m5_9 > 0.03) && (vsat_marg_m5_9 > 0.03) && (region_m5_9 == 2) != 0) then cond_m5_9 = 1 else cond_m5_9 = 0)
  	if(((von_marg_m6_9 > 0.03) && (vsat_marg_m6_9 > 0.03) && (region_m6_9 == 2) != 0) then cond_m6_9 = 1 else cond_m6_9 = 0)
  	if(((von_marg_m7_9 > 0.03) && (vsat_marg_m7_9 > 0.03) && (region_m7_9 == 2) != 0) then cond_m7_9 = 1 else cond_m7_9 = 0)

	if(((cond_m0_9 == 1) && (cond_m1_9 == 1) && (cond_m2_9 == 1) && (cond_m3_9 == 1) && (cond_m4_9 == 1) && (cond_m5_9 == 1) && (cond_m6_9 == 1) && (cond_m7_9 == 1) != 0) then cond_9 = 1 else cond_9 = 0)	

	PM_9 = phaseMargin((VF("/out_9") / VF("/in_p")))
	DC_gain_9 = value(dB20((VF("/out_9") / VF("/in_p"))) 1)
	UGB_9 = unityGainFreq((VF("/out_9") / VF("/in_p")))
	Power_9 = (1.2 * (OP("/M5_9" "id") + OP("/M4_9" "id")))

	fprintf(fout "%d\n", cond_9)
	fprintf(fout "%f\n", PM_9)
  	fprintf(fout "%f\n", DC_gain_9)
	fprintf(fout "%f\n", UGB_9*1e-6)
  	fprintf(fout "%f\n", Power_9*1e+6)
	fprintf(fout "\n")

	;;---------------------------------------------
	von_marg_m0_10  = OP("/M0_10","vgt")
	von_marg_m1_10  = OP("/M1_10","vgt")
	von_marg_m2_10  = -OP("/M2_10","vgt") ; PMOS
	von_marg_m3_10  = -OP("/M3_10","vgt") ; PMOS
	von_marg_m4_10  = OP("/M4_10","vgt")
	von_marg_m5_10  = OP("/M5_10","vgt")
	von_marg_m6_10 = -OP("/M6_10","vgt") ; PMOS
	von_marg_m7_10  = OP("/M7_10","vgt")
	vsat_marg_m0_10 = OP("/M0_10","vsat_marg")
	vsat_marg_m1_10 = OP("/M1_10","vsat_marg")
	vsat_marg_m2_10 = OP("/M2_10","vsat_marg")
	vsat_marg_m3_10 = OP("/M3_10","vsat_marg")
	vsat_marg_m4_10 = OP("/M4_10","vsat_marg")
	vsat_marg_m5_10 = OP("/M5_10","vsat_marg")
	vsat_marg_m6_10 = OP("/M6_10","vsat_marg")
	vsat_marg_m7_10 = OP("/M7_10","vsat_marg")
	region_m0_10    = OP("/M0_10","region")
	region_m1_10    = OP("/M1_10","region")
	region_m2_10    = OP("/M2_10","region")
	region_m3_10    = OP("/M3_10","region")
	region_m4_10    = OP("/M4_10","region")
	region_m5_10    = OP("/M5_10","region")
	region_m6_10    = OP("/M6_10","region")
	region_m7_10    = OP("/M7_10","region")

	if(((von_marg_m0_10 > 0.03) && (vsat_marg_m0_10 > 0.03) && (region_m0_10 == 2) != 0) then cond_m0_10 = 1 else cond_m0_10 = 0)
  	if(((von_marg_m1_10 > 0.03) && (vsat_marg_m1_10 > 0.03) && (region_m1_10 == 2) != 0) then cond_m1_10 = 1 else cond_m1_10 = 0)
  	if(((von_marg_m2_10 > 0.03) && (vsat_marg_m2_10 > 0.03) && (region_m2_10 == 2) != 0) then cond_m2_10 = 1 else cond_m2_10 = 0)
  	if(((von_marg_m3_10 > 0.03) && (vsat_marg_m3_10 > 0.03) && (region_m3_10 == 2) != 0) then cond_m3_10 = 1 else cond_m3_10 = 0)
  	if(((von_marg_m4_10 > 0.03) && (vsat_marg_m4_10 > 0.03) && (region_m4_10 == 2) != 0) then cond_m4_10 = 1 else cond_m4_10 = 0)
  	if(((von_marg_m5_10 > 0.03) && (vsat_marg_m5_10 > 0.03) && (region_m5_10 == 2) != 0) then cond_m5_10 = 1 else cond_m5_10 = 0)
  	if(((von_marg_m6_10 > 0.03) && (vsat_marg_m6_10 > 0.03) && (region_m6_10 == 2) != 0) then cond_m6_10 = 1 else cond_m6_10 = 0)
  	if(((von_marg_m7_10 > 0.03) && (vsat_marg_m7_10 > 0.03) && (region_m7_10 == 2) != 0) then cond_m7_10 = 1 else cond_m7_10 = 0)

	if(((cond_m0_10 == 1) && (cond_m1_10 == 1) && (cond_m2_10 == 1) && (cond_m3_10 == 1) && (cond_m4_10 == 1) && (cond_m5_10 == 1) && (cond_m6_10 == 1) && (cond_m7_10 == 1) != 0) then cond_10 = 1 else cond_10 = 0)	

	PM_10 = phaseMargin((VF("/out_10") / VF("/in_p")))
	DC_gain_10 = value(dB20((VF("/out_10") / VF("/in_p"))) 1)
	UGB_10 = unityGainFreq((VF("/out_10") / VF("/in_p")))
	Power_10 = (1.2 * (OP("/M5_10" "id") + OP("/M4_10" "id")))

	fprintf(fout "%d\n", cond_10)
	fprintf(fout "%f\n", PM_10)
  	fprintf(fout "%f\n", DC_gain_10)
	fprintf(fout "%f\n", UGB_10*1e-6)
  	fprintf(fout "%f\n", Power_10*1e+6)
	fprintf(fout "\n")

	;;---------------------------------------------
	von_marg_m0_11  = OP("/M0_11","vgt")
	von_marg_m1_11  = OP("/M1_11","vgt")
	von_marg_m2_11  = -OP("/M2_11","vgt") ; PMOS
	von_marg_m3_11  = -OP("/M3_11","vgt") ; PMOS
	von_marg_m4_11  = OP("/M4_11","vgt")
	von_marg_m5_11  = OP("/M5_11","vgt")
	von_marg_m6_11  = -OP("/M6_11","vgt") ; PMOS
	von_marg_m7_11  = OP("/M7_11","vgt")
	vsat_marg_m0_11 = OP("/M0_11","vsat_marg")
	vsat_marg_m1_11 = OP("/M1_11","vsat_marg")
	vsat_marg_m2_11 = OP("/M2_11","vsat_marg")
	vsat_marg_m3_11 = OP("/M3_11","vsat_marg")
	vsat_marg_m4_11 = OP("/M4_11","vsat_marg")
	vsat_marg_m5_11 = OP("/M5_11","vsat_marg")
	vsat_marg_m6_11 = OP("/M6_11","vsat_marg")
	vsat_marg_m7_11 = OP("/M7_11","vsat_marg")
	region_m0_11    = OP("/M0_11","region")
	region_m1_11    = OP("/M1_11","region")
	region_m2_11    = OP("/M2_11","region")
	region_m3_11    = OP("/M3_11","region")
	region_m4_11    = OP("/M4_11","region")
	region_m5_11    = OP("/M5_11","region")
	region_m6_11    = OP("/M6_11","region")
	region_m7_11    = OP("/M7_11","region")

	if(((von_marg_m0_11 > 0.03) && (vsat_marg_m0_11 > 0.03) && (region_m0_11 == 2) != 0) then cond_m0_11 = 1 else cond_m0_11 = 0)
  	if(((von_marg_m1_11 > 0.03) && (vsat_marg_m1_11 > 0.03) && (region_m1_11 == 2) != 0) then cond_m1_11 = 1 else cond_m1_11 = 0)
  	if(((von_marg_m2_11 > 0.03) && (vsat_marg_m2_11 > 0.03) && (region_m2_11 == 2) != 0) then cond_m2_11 = 1 else cond_m2_11 = 0)
  	if(((von_marg_m3_11 > 0.03) && (vsat_marg_m3_11 > 0.03) && (region_m3_11 == 2) != 0) then cond_m3_11 = 1 else cond_m3_11 = 0)
  	if(((von_marg_m4_11 > 0.03) && (vsat_marg_m4_11 > 0.03) && (region_m4_11 == 2) != 0) then cond_m4_11 = 1 else cond_m4_11 = 0)
  	if(((von_marg_m5_11 > 0.03) && (vsat_marg_m5_11 > 0.03) && (region_m5_11 == 2) != 0) then cond_m5_11 = 1 else cond_m5_11 = 0)
  	if(((von_marg_m6_11 > 0.03) && (vsat_marg_m6_11 > 0.03) && (region_m6_11 == 2) != 0) then cond_m6_11 = 1 else cond_m6_11 = 0)
  	if(((von_marg_m7_11 > 0.03) && (vsat_marg_m7_11 > 0.03) && (region_m7_11 == 2) != 0) then cond_m7_11 = 1 else cond_m7_11 = 0)

	if(((cond_m0_11 == 1) && (cond_m1_11 == 1) && (cond_m2_11 == 1) && (cond_m3_11 == 1) && (cond_m4_11 == 1) && (cond_m5_11 == 1) && (cond_m6_11 == 1) && (cond_m7_11 == 1) != 0) then cond_11 = 1 else cond_11 = 0)	

		
	PM_11 = phaseMargin((VF("/out_11") / VF("/in_p")))
	DC_gain_11 = value(dB20((VF("/out_11") / VF("/in_p"))) 1)
	UGB_11 = unityGainFreq((VF("/out_11") / VF("/in_p")))
	Power_11 = (1.2 * (OP("/M5_11" "id") + OP("/M4_11" "id")))

	fprintf(fout "%d\n", cond_11)
	fprintf(fout "%f\n", PM_11)
  	fprintf(fout "%f\n", DC_gain_11)
	fprintf(fout "%f\n", UGB_11*1e-6)
  	fprintf(fout "%f\n", Power_11*1e+6)
	fprintf(fout "\n")

	;;---------------------------------------------
	von_marg_m0_12  = OP("/M0_12","vgt")
	von_marg_m1_12  = OP("/M1_12","vgt")
	von_marg_m2_12  = -OP("/M2_12","vgt") ; PMOS
	von_marg_m3_12  = -OP("/M3_12","vgt") ; PMOS
	von_marg_m4_12  = OP("/M4_12","vgt")
	von_marg_m5_12  = OP("/M5_12","vgt")
	von_marg_m6_12  = -OP("/M6_12","vgt") ; PMOS
	von_marg_m7_12  = OP("/M7_12","vgt")
	vsat_marg_m0_12 = OP("/M0_12","vsat_marg")
	vsat_marg_m1_12 = OP("/M1_12","vsat_marg")
	vsat_marg_m2_12 = OP("/M2_12","vsat_marg")
	vsat_marg_m3_12 = OP("/M3_12","vsat_marg")
	vsat_marg_m4_12 = OP("/M4_12","vsat_marg")
	vsat_marg_m5_12 = OP("/M5_12","vsat_marg")
	vsat_marg_m6_12 = OP("/M6_12","vsat_marg")
	vsat_marg_m7_12 = OP("/M7_12","vsat_marg")
	region_m0_12    = OP("/M0_12","region")
	region_m1_12    = OP("/M1_12","region")
	region_m2_12    = OP("/M2_12","region")
	region_m3_12    = OP("/M3_12","region")
	region_m4_12    = OP("/M4_12","region")
	region_m5_12    = OP("/M5_12","region")
	region_m6_12   = OP("/M6_12","region")
	region_m7_12    = OP("/M7_12","region")

	if(((von_marg_m0_12 > 0.03) && (vsat_marg_m0_12 > 0.03) && (region_m0_12 == 2) != 0) then cond_m0_12 = 1 else cond_m0_12 = 0)
  	if(((von_marg_m1_12 > 0.03) && (vsat_marg_m1_12 > 0.03) && (region_m1_12 == 2) != 0) then cond_m1_12 = 1 else cond_m1_12 = 0)
  	if(((von_marg_m2_12 > 0.03) && (vsat_marg_m2_12 > 0.03) && (region_m2_12 == 2) != 0) then cond_m2_12 = 1 else cond_m2_12 = 0)
  	if(((von_marg_m3_12 > 0.03) && (vsat_marg_m3_12 > 0.03) && (region_m3_12 == 2) != 0) then cond_m3_12 = 1 else cond_m3_12 = 0)
  	if(((von_marg_m4_12 > 0.03) && (vsat_marg_m4_12 > 0.03) && (region_m4_12 == 2) != 0) then cond_m4_12 = 1 else cond_m4_12 = 0)
  	if(((von_marg_m5_12 > 0.03) && (vsat_marg_m5_12 > 0.03) && (region_m5_12 == 2) != 0) then cond_m5_12 = 1 else cond_m5_12 = 0)
  	if(((von_marg_m6_12 > 0.03) && (vsat_marg_m6_12 > 0.03) && (region_m6_12 == 2) != 0) then cond_m6_12 = 1 else cond_m6_12 = 0)
  	if(((von_marg_m7_12 > 0.03) && (vsat_marg_m7_12 > 0.03) && (region_m7_12 == 2) != 0) then cond_m7_12 = 1 else cond_m7_12 = 0)

	if(((cond_m0_12 == 1) && (cond_m1_12 == 1) && (cond_m2_12 == 1) && (cond_m3_12 == 1) && (cond_m4_12 == 1) && (cond_m5_12 == 1) && (cond_m6_12 == 1) && (cond_m7_12 == 1) != 0) then cond_12 = 1 else cond_12 = 0)	
	
	PM_12 = phaseMargin((VF("/out_12") / VF("/in_p")))
	DC_gain_12 = value(dB20((VF("/out_12") / VF("/in_p"))) 1)
	UGB_12 = unityGainFreq((VF("/out_12") / VF("/in_p")))
	Power_12 = (1.2 * (OP("/M5_12" "id") + OP("/M4_12" "id")))

	fprintf(fout "%d\n", cond_12)
	fprintf(fout "%f\n", PM_12)
  	fprintf(fout "%f\n", DC_gain_12)
	fprintf(fout "%f\n", UGB_12*1e-6)
  	fprintf(fout "%f\n", Power_12*1e+6)
	fprintf(fout "\n")

	;;---------------------------------------------
	von_marg_m0_13  = OP("/M0_13","vgt")
	von_marg_m1_13 = OP("/M1_13","vgt")
	von_marg_m2_13  = -OP("/M2_13","vgt") ; PMOS
	von_marg_m3_13  = -OP("/M3_13","vgt") ; PMOS
	von_marg_m4_13  = OP("/M4_13","vgt")
	von_marg_m5_13  = OP("/M5_13","vgt")
	von_marg_m6_13  = -OP("/M6_13","vgt") ; PMOS
	von_marg_m7_13  = OP("/M7_13","vgt")
	vsat_marg_m0_13 = OP("/M0_13","vsat_marg")
	vsat_marg_m1_13 = OP("/M1_13","vsat_marg")
	vsat_marg_m2_13 = OP("/M2_13","vsat_marg")
	vsat_marg_m3_13 = OP("/M3_13","vsat_marg")
	vsat_marg_m4_13 = OP("/M4_13","vsat_marg")
	vsat_marg_m5_13 = OP("/M5_13","vsat_marg")
	vsat_marg_m6_13 = OP("/M6_13","vsat_marg")
	vsat_marg_m7_13 = OP("/M7_13","vsat_marg")
	region_m0_13    = OP("/M0_13","region")
	region_m1_13    = OP("/M1_13","region")
	region_m2_13    = OP("/M2_13","region")
	region_m3_13    = OP("/M3_13","region")
	region_m4_13    = OP("/M4_13","region")
	region_m5_13    = OP("/M5_13","region")
	region_m6_13    = OP("/M6_13","region")
	region_m7_13    = OP("/M7_13","region")

	if(((von_marg_m0_13 > 0.03) && (vsat_marg_m0_13 > 0.03) && (region_m0_13 == 2) != 0) then cond_m0_13 = 1 else cond_m0_13 = 0)
  	if(((von_marg_m1_13 > 0.03) && (vsat_marg_m1_13 > 0.03) && (region_m1_13 == 2) != 0) then cond_m1_13 = 1 else cond_m1_13 = 0)
  	if(((von_marg_m2_13 > 0.03) && (vsat_marg_m2_13 > 0.03) && (region_m2_13 == 2) != 0) then cond_m2_13 = 1 else cond_m2_13 = 0)
  	if(((von_marg_m3_13 > 0.03) && (vsat_marg_m3_13 > 0.03) && (region_m3_13 == 2) != 0) then cond_m3_13 = 1 else cond_m3_13 = 0)
  	if(((von_marg_m4_13 > 0.03) && (vsat_marg_m4_13 > 0.03) && (region_m4_13 == 2) != 0) then cond_m4_13 = 1 else cond_m4_13 = 0)
  	if(((von_marg_m5_13 > 0.03) && (vsat_marg_m5_13 > 0.03) && (region_m5_13 == 2) != 0) then cond_m5_13 = 1 else cond_m5_13 = 0)
  	if(((von_marg_m6_13 > 0.03) && (vsat_marg_m6_13 > 0.03) && (region_m6_13 == 2) != 0) then cond_m6_13 = 1 else cond_m6_13 = 0)
  	if(((von_marg_m7_13 > 0.03) && (vsat_marg_m7_13 > 0.03) && (region_m7_13 == 2) != 0) then cond_m7_13 = 1 else cond_m7_13 = 0)

	if(((cond_m0_13 == 1) && (cond_m1_13 == 1) && (cond_m2_13 == 1) && (cond_m3_13 == 1) && (cond_m4_13 == 1) && (cond_m5_13 == 1) && (cond_m6_13 == 1) && (cond_m7_13 == 1) != 0) then cond_13 = 1 else cond_13 = 0)
	
	PM_13 = phaseMargin((VF("/out_13") / VF("/in_p")))
	DC_gain_13 = value(dB20((VF("/out_13") / VF("/in_p"))) 1)
	UGB_13 = unityGainFreq((VF("/out_13") / VF("/in_p")))
	Power_13 = (1.2 * (OP("/M5_13" "id") + OP("/M4_13" "id")))

	fprintf(fout "%d\n", cond_13)
	fprintf(fout "%f\n", PM_13)
  	fprintf(fout "%f\n", DC_gain_13)
	fprintf(fout "%f\n", UGB_13*1e-6)
  	fprintf(fout "%f\n", Power_13*1e+6)
	fprintf(fout "\n")

	;;---------------------------------------------
	von_marg_m0_14  = OP("/M0_14","vgt")
	von_marg_m1_14  = OP("/M1_14","vgt")
	von_marg_m2_14  = -OP("/M2_14","vgt") ; PMOS
	von_marg_m3_14  = -OP("/M3_14","vgt") ; PMOS
	von_marg_m4_14  = OP("/M4_14","vgt")
	von_marg_m5_14  = OP("/M5_14","vgt")
	von_marg_m6_14  = -OP("/M6_14","vgt") ; PMOS
	von_marg_m7_14  = OP("/M7_14","vgt")
	vsat_marg_m0_14 = OP("/M0_14","vsat_marg")
	vsat_marg_m1_14 = OP("/M1_14","vsat_marg")
	vsat_marg_m2_14 = OP("/M2_14","vsat_marg")
	vsat_marg_m3_14 = OP("/M3_14","vsat_marg")
	vsat_marg_m4_14 = OP("/M4_14","vsat_marg")
	vsat_marg_m5_14 = OP("/M5_14","vsat_marg")
	vsat_marg_m6_14 = OP("/M6_14","vsat_marg")
	vsat_marg_m7_14 = OP("/M7_14","vsat_marg")
	region_m0_14    = OP("/M0_14","region")
	region_m1_14    = OP("/M1_14","region")
	region_m2_14    = OP("/M2_14","region")
	region_m3_14    = OP("/M3_14","region")
	region_m4_14    = OP("/M4_14","region")
	region_m5_14    = OP("/M5_14","region")
	region_m6_14    = OP("/M6_14","region")
	region_m7_14    = OP("/M7_14","region")

	if(((von_marg_m0_14 > 0.03) && (vsat_marg_m0_14 > 0.03) && (region_m0_14 == 2) != 0) then cond_m0_14 = 1 else cond_m0_14 = 0)
  	if(((von_marg_m1_14 > 0.03) && (vsat_marg_m1_14 > 0.03) && (region_m1_14 == 2) != 0) then cond_m1_14 = 1 else cond_m1_14 = 0)
  	if(((von_marg_m2_14 > 0.03) && (vsat_marg_m2_14 > 0.03) && (region_m2_14 == 2) != 0) then cond_m2_14 = 1 else cond_m2_14 = 0)
  	if(((von_marg_m3_14 > 0.03) && (vsat_marg_m3_14 > 0.03) && (region_m3_14 == 2) != 0) then cond_m3_14 = 1 else cond_m3_14 = 0)
  	if(((von_marg_m4_14 > 0.03) && (vsat_marg_m4_14 > 0.03) && (region_m4_14 == 2) != 0) then cond_m4_14 = 1 else cond_m4_14 = 0)
  	if(((von_marg_m5_14 > 0.03) && (vsat_marg_m5_14 > 0.03) && (region_m5_14 == 2) != 0) then cond_m5_14 = 1 else cond_m5_14 = 0)
  	if(((von_marg_m6_14 > 0.03) && (vsat_marg_m6_14 > 0.03) && (region_m6_14 == 2) != 0) then cond_m6_14 = 1 else cond_m6_14 = 0)
  	if(((von_marg_m7_14 > 0.03) && (vsat_marg_m7_14 > 0.03) && (region_m7_14 == 2) != 0) then cond_m7_14 = 1 else cond_m7_14 = 0)

	if(((cond_m0_14 == 1) && (cond_m1_14 == 1) && (cond_m2_14 == 1) && (cond_m3_14 == 1) && (cond_m4_14 == 1) && (cond_m5_14 == 1) && (cond_m6_14 == 1) && (cond_m7_14 == 1) != 0) then cond_14 = 1 else cond_14 = 0)	
	
	PM_14 = phaseMargin((VF("/out_14") / VF("/in_p")))
	DC_gain_14 = value(dB20((VF("/out_14") / VF("/in_p"))) 1)
	UGB_14 = unityGainFreq((VF("/out_14") / VF("/in_p")))
	Power_14 = (1.2 * (OP("/M5_14" "id") + OP("/M4_14" "id")))

	fprintf(fout "%d\n", cond_14)
	fprintf(fout "%f\n", PM_14)
  	fprintf(fout "%f\n", DC_gain_14)
	fprintf(fout "%f\n", UGB_14*1e-6)
  	fprintf(fout "%f\n", Power_14*1e+6)
	fprintf(fout "\n")

	;;---------------------------------------------
	von_marg_m0_15  = OP("/M0_15","vgt")
	von_marg_m1_15  = OP("/M1_15","vgt")
	von_marg_m2_15  = -OP("/M2_15","vgt") ; PMOS
	von_marg_m3_15  = -OP("/M3_15","vgt") ; PMOS
	von_marg_m4_15  = OP("/M4_15","vgt")
	von_marg_m5_15  = OP("/M5_15","vgt")
	von_marg_m6_15  = -OP("/M6_15","vgt") ; PMOS
	von_marg_m7_15  = OP("/M7_15","vgt")
	vsat_marg_m0_15 = OP("/M0_15","vsat_marg")
	vsat_marg_m1_15 = OP("/M1_15","vsat_marg")
	vsat_marg_m2_15 = OP("/M2_15","vsat_marg")
	vsat_marg_m3_15 = OP("/M3_15","vsat_marg")
	vsat_marg_m4_15 = OP("/M4_15","vsat_marg")
	vsat_marg_m5_15 = OP("/M5_15","vsat_marg")
	vsat_marg_m6_15 = OP("/M6_15","vsat_marg")
	vsat_marg_m7_15 = OP("/M7_15","vsat_marg")
	region_m0_15    = OP("/M0_15","region")
	region_m1_15    = OP("/M1_15","region")
	region_m2_15    = OP("/M2_15","region")
	region_m3_15    = OP("/M3_15","region")
	region_m4_15    = OP("/M4_15","region")
	region_m5_15    = OP("/M5_15","region")
	region_m6_15    = OP("/M6_15","region")
	region_m7_15    = OP("/M7_15","region")

	if(((von_marg_m0_15 > 0.03) && (vsat_marg_m0_15 > 0.03) && (region_m0_15 == 2) != 0) then cond_m0_15 = 1 else cond_m0_15 = 0)
  	if(((von_marg_m1_15 > 0.03) && (vsat_marg_m1_15 > 0.03) && (region_m1_15 == 2) != 0) then cond_m1_15 = 1 else cond_m1_15 = 0)
  	if(((von_marg_m2_15 > 0.03) && (vsat_marg_m2_15 > 0.03) && (region_m2_15 == 2) != 0) then cond_m2_15 = 1 else cond_m2_15 = 0)
  	if(((von_marg_m3_15 > 0.03) && (vsat_marg_m3_15 > 0.03) && (region_m3_15 == 2) != 0) then cond_m3_15 = 1 else cond_m3_15 = 0)
  	if(((von_marg_m4_15 > 0.03) && (vsat_marg_m4_15 > 0.03) && (region_m4_15 == 2) != 0) then cond_m4_15 = 1 else cond_m4_15 = 0)
  	if(((von_marg_m5_15 > 0.03) && (vsat_marg_m5_15 > 0.03) && (region_m5_15 == 2) != 0) then cond_m5_15 = 1 else cond_m5_15 = 0)
  	if(((von_marg_m6_15 > 0.03) && (vsat_marg_m6_15 > 0.03) && (region_m6_15 == 2) != 0) then cond_m6_15 = 1 else cond_m6_15 = 0)
  	if(((von_marg_m7_15 > 0.03) && (vsat_marg_m7_15 > 0.03) && (region_m7_15 == 2) != 0) then cond_m7_15 = 1 else cond_m7_15 = 0)

	if(((cond_m0_15 == 1) && (cond_m1_15 == 1) && (cond_m2_15 == 1) && (cond_m3_15 == 1) && (cond_m4_15 == 1) && (cond_m5_15 == 1) && (cond_m6_15 == 1) && (cond_m7_15 == 1) != 0) then cond_15 = 1 else cond_15 = 0)	

	
	PM_15 = phaseMargin((VF("/out_15") / VF("/in_p")))
	DC_gain_15 = value(dB20((VF("/out_15") / VF("/in_p"))) 1)
	UGB_15 = unityGainFreq((VF("/out_15") / VF("/in_p")))
	Power_15 = (1.2 * (OP("/M5_15" "id") + OP("/M4_15" "id")))

	fprintf(fout "%d\n", cond_15)
	fprintf(fout "%f\n", PM_15)
  	fprintf(fout "%f\n", DC_gain_15)
	fprintf(fout "%f\n", UGB_15*1e-6)
  	fprintf(fout "%f\n", Power_15*1e+6)
	fprintf(fout "\n")

	;;---------------------------------------------
	von_marg_m0_16  = OP("/M0_16","vgt")
	von_marg_m1_16  = OP("/M1_16","vgt")
	von_marg_m2_16  = -OP("/M2_16","vgt") ; PMOS
	von_marg_m3_16  = -OP("/M3_16","vgt") ; PMOS
	von_marg_m4_16  = OP("/M4_16","vgt")
	von_marg_m5_16 = OP("/M5_16","vgt")
	von_marg_m6_16  = -OP("/M6_16","vgt") ; PMOS
	von_marg_m7_16  = OP("/M7_16","vgt")
	vsat_marg_m0_16 = OP("/M0_16","vsat_marg")
	vsat_marg_m1_16 = OP("/M1_16","vsat_marg")
	vsat_marg_m2_16 = OP("/M2_16","vsat_marg")
	vsat_marg_m3_16 = OP("/M3_16","vsat_marg")
	vsat_marg_m4_16 = OP("/M4_16","vsat_marg")
	vsat_marg_m5_16 = OP("/M5_16","vsat_marg")
	vsat_marg_m6_16 = OP("/M6_16","vsat_marg")
	vsat_marg_m7_16 = OP("/M7_16","vsat_marg")
	region_m0_16    = OP("/M0_16","region")
	region_m1_16    = OP("/M1_16","region")
	region_m2_16    = OP("/M2_16","region")
	region_m3_16    = OP("/M3_16","region")
	region_m4_16    = OP("/M4_16","region")
	region_m5_16    = OP("/M5_16","region")
	region_m6_16    = OP("/M6_16","region")
	region_m7_16    = OP("/M7_16","region")

	if(((von_marg_m0_16 > 0.03) && (vsat_marg_m0_16 > 0.03) && (region_m0_16 == 2) != 0) then cond_m0_16 = 1 else cond_m0_16 = 0)
  	if(((von_marg_m1_16 > 0.03) && (vsat_marg_m1_16 > 0.03) && (region_m1_16 == 2) != 0) then cond_m1_16 = 1 else cond_m1_16 = 0)
  	if(((von_marg_m2_16 > 0.03) && (vsat_marg_m2_16 > 0.03) && (region_m2_16 == 2) != 0) then cond_m2_16 = 1 else cond_m2_16 = 0)
  	if(((von_marg_m3_16 > 0.03) && (vsat_marg_m3_16 > 0.03) && (region_m3_16 == 2) != 0) then cond_m3_16 = 1 else cond_m3_16 = 0)
  	if(((von_marg_m4_16 > 0.03) && (vsat_marg_m4_16 > 0.03) && (region_m4_16 == 2) != 0) then cond_m4_16 = 1 else cond_m4_16 = 0)
  	if(((von_marg_m5_16 > 0.03) && (vsat_marg_m5_16 > 0.03) && (region_m5_16 == 2) != 0) then cond_m5_16 = 1 else cond_m5_16 = 0)
  	if(((von_marg_m6_16 > 0.03) && (vsat_marg_m6_16 > 0.03) && (region_m6_16 == 2) != 0) then cond_m6_16 = 1 else cond_m6_16 = 0)
  	if(((von_marg_m7_16 > 0.03) && (vsat_marg_m7_16 > 0.03) && (region_m7_16 == 2) != 0) then cond_m7_16 = 1 else cond_m7_16 = 0)

	if(((cond_m0_16 == 1) && (cond_m1_16 == 1) && (cond_m2_16 == 1) && (cond_m3_16 == 1) && (cond_m4_16 == 1) && (cond_m5_16 == 1) && (cond_m6_16 == 1) && (cond_m7_16 == 1) != 0) then cond_16 = 1 else cond_16 = 0)	

	
	PM_16 = phaseMargin((VF("/out_16") / VF("/in_p")))
	DC_gain_16 = value(dB20((VF("/out_16") / VF("/in_p"))) 1)
	UGB_16 = unityGainFreq((VF("/out_16") / VF("/in_p")))
	Power_16 = (1.2 * (OP("/M5_16" "id") + OP("/M4_16" "id")))

	fprintf(fout "%d\n", cond_16)
	fprintf(fout "%f\n", PM_16)
  	fprintf(fout "%f\n", DC_gain_16)
	fprintf(fout "%f\n", UGB_16*1e-6)
  	fprintf(fout "%f\n", Power_16*1e+6)

	
	close(fout)
)

khoitao()
chay()
exit


